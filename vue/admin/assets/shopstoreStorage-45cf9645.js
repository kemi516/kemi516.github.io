import{d as q,r as m,C as M,D as R,b as i,o as r,c as k,l as $,e,w as l,h as o,j as y,z as L,i as x,G as N,q as j,H as X,m as I,F as G,I as H}from"./index-77c538a5.js";import{_ as J}from"./_plugin-vue_export-helper-c27b6911.js";import{g as O,D as P}from"./api-43aec3d8.js";const Y=["src"],K=["src"],Q=["src"],F="https://kemi.loca.lt",W=q({__name:"ShopModal",props:["dialogTableVisible","rowData","judge"],setup(C){const v=C,u=m(!1),w=()=>{u.value=!1,setTimeout(()=>{location.reload()},1500)};u.value=v.dialogTableVisible;const S=m("default"),U=m(),z=M({id:[{required:!1,message:"id",trigger:"blur"}],title:[{required:!0,message:"请输入标题",trigger:"change"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}],price:[{required:!0,message:"请输入价格",trigger:"change"}],image:[{required:!0,message:"请输入图片路径",trigger:"blur"}]}),p=m(),f=n=>{p.value.clearFiles();const a=n[0];a.uid=N(),p.value.handleStart(a)};let t=M({id:"",title:"kemi",content:"20",price:"250",image:p.value});v.judge?console.log("judge"):t=v.rowData;let D=R(()=>({id:t.id,title:t.title,content:t.content,price:t.price}));const _=m(""),d=(n,a)=>{t.image="",_.value=URL.createObjectURL(n.raw)},h=n=>(_.value=n.name,console.log("rawFile XXXXX",n.name),n.type!=="image/png"?(j.error("Avatar picture must be JPG format!"),!1):n.size/1024/1024>2?(j.error("Avatar picture size can not exceed 2MB!"),!1):!0),b=()=>{p.value.submit(),setTimeout(()=>{location.reload()},1500)};return(n,a)=>{const g=i("el-input"),c=i("el-form-item"),V=i("el-icon"),T=i("el-upload"),E=i("el-button"),A=i("el-form"),B=i("el-dialog");return r(),k("div",null,[$("div",null,[e(B,{modelValue:u.value,"onUpdate:modelValue":a[6]||(a[6]=s=>u.value=s),title:"user info","close-on-click-modal":!1},{default:l(()=>[e(A,{ref_key:"ruleFormRef",ref:U,model:o(t),rules:z,"label-width":"120px",class:"demo-ruleForm",size:S.value,"status-icon":""},{default:l(()=>[e(c,{label:"id",prop:"id"},{default:l(()=>[e(g,{modelValue:o(t).id,"onUpdate:modelValue":a[0]||(a[0]=s=>o(t).id=s),disabled:""},null,8,["modelValue"])]),_:1}),C.judge?(r(),y(c,{key:0,label:"title",prop:"title"},{default:l(()=>[e(g,{modelValue:o(t).title,"onUpdate:modelValue":a[1]||(a[1]=s=>o(t).title=s)},null,8,["modelValue"])]),_:1})):(r(),y(c,{key:1,label:"title",prop:"title"},{default:l(()=>[e(g,{modelValue:o(t).title,"onUpdate:modelValue":a[2]||(a[2]=s=>o(t).title=s),disabled:""},null,8,["modelValue"])]),_:1})),e(c,{label:"content",prop:"content"},{default:l(()=>[e(g,{modelValue:o(t).content,"onUpdate:modelValue":a[3]||(a[3]=s=>o(t).content=s)},null,8,["modelValue"])]),_:1}),e(c,{label:"price",prop:"price"},{default:l(()=>[e(g,{modelValue:o(t).price,"onUpdate:modelValue":a[4]||(a[4]=s=>o(t).price=s)},null,8,["modelValue"])]),_:1}),e(c,{label:"image",prop:"image"},{default:l(()=>[C.judge?(r(),y(T,{key:0,action:`${F}/shopList`,class:"avatar-uploader","show-file-list":!1,name:"image","auto-upload":!1,ref_key:"uploadRef",ref:p,"on-exceed":f,limit:1,"before-upload":h,data:o(D),method:"post","on-change":d},{default:l(()=>[_.value?(r(),k("img",{key:0,src:_.value,class:"avatar"},null,8,Y)):(r(),y(V,{key:1,class:"avatar-uploader-icon"},{default:l(()=>[e(o(L))]),_:1}))]),_:1},8,["action","data"])):(r(),y(T,{key:1,action:`${F}/shopList`,class:"avatar-uploader","show-file-list":!1,name:"image","auto-upload":!1,ref_key:"uploadRef",ref:p,"on-exceed":f,limit:1,"before-upload":h,data:o(D),method:"put","on-change":d},{default:l(()=>[_.value?(r(),k("img",{key:0,src:_.value,class:"avatar"},null,8,K)):(r(),k("img",{key:1,src:` ${F+o(t).image}`,class:"avatar"},null,8,Q))]),_:1},8,["action","data"]))]),_:1}),e(c,null,{default:l(()=>[e(E,{type:"primary",onClick:a[5]||(a[5]=s=>b())},{default:l(()=>[x(" Create ")]),_:1}),e(E,{onClick:w},{default:l(()=>[x("取消")]),_:1})]),_:1})]),_:1},8,["model","rules","size"])]),_:1},8,["modelValue"])])])}}});const Z=J(W,[["__scopeId","data-v-922ffc7d"]]),ae=q({__name:"shopstoreStorage",setup(C){let v=m(!1);const u=m("11"),w=async()=>{U=(await O()).data.data,u.value=""};X(()=>{w()});let S=R(()=>U.filter(d=>!u.value||d.title.toLowerCase().includes(u.value.toLowerCase()))),U=[{id:"",title:"kemi",content:"20",price:"250",image:""}];const z=d=>{P(d.title),w(),location.reload(),j({message:"Congrats, this is a success message.",type:"success"})},p=()=>{console.log("cancel!"),j.error("取消删除   ")},f=m(!1),t=m(""),D=d=>{f.value=!0,t.value=d},_=()=>{f.value=!0,v.value=!0};return(d,h)=>{const b=i("el-button"),n=i("el-table-column"),a=i("el-input"),g=i("el-popconfirm"),c=i("el-table");return r(),k(G,null,[e(b,{type:"primary",onClick:_},{default:l(()=>[x("新增")]),_:1}),e(c,{data:o(S),style:{width:"100%"},height:"80vh"},{default:l(()=>[e(n,{fixed:"",label:"id",prop:"id"}),e(n,{label:"title",prop:"title"}),e(n,{label:"content",prop:"content"}),e(n,{label:"price",prop:"price"}),e(n,{label:"image",prop:"image"}),e(n,{align:"right"},{header:l(()=>[e(a,{modelValue:u.value,"onUpdate:modelValue":h[0]||(h[0]=V=>u.value=V),size:"small",placeholder:"Type to search"},null,8,["modelValue"])]),default:l(V=>[$("div",null,[e(b,{size:"small",onClick:T=>D(V.row)},{default:l(()=>[x(" Edit ")]),_:2},1032,["onClick"]),e(b,{size:"small",type:"danger"},{default:l(()=>[e(g,{"confirm-button-text":"Yes","cancel-button-text":"No",icon:o(H),"icon-color":"#626AEF",title:"Are you sure to delete this?",onConfirm:T=>z(V.row),onCancel:p},{reference:l(()=>[e(b,null,{default:l(()=>[x("Delete")]),_:1})]),_:2},1032,["icon","onConfirm"])]),_:2},1024)])]),_:1})]),_:1},8,["data"]),f.value?(r(),y(Z,{key:0,dialogTableVisible:f.value,rowData:t.value,judge:o(v)},null,8,["dialogTableVisible","rowData","judge"])):I("",!0)],64)}}});export{ae as default};
