import{q as l,n as a,s as e,o as s,c as o,w as t,i as n,a as i,b as u,e as c,f as r,F as d,t as b,h as g,u as f,v as h,x as _,j as p,g as k,p as m,I as j}from"./index-91317e6b.js";import{_ as v}from"./uni-icons.f3c0818a.js";import{r as C}from"./uni-app.es.5c6ada36.js";import{_ as y}from"./_plugin-vue_export-helper.1b428a4d.js";const x=y({data(){return{bags:this.$store.state.bags,bool:!1,pianji:!0}},onShow(){console.log("storebag",this.$store.state.bags),this.bags=this.$store.state.bags||[],console.log("k",this.bags)},methods:{...l(["Xbags","Xorder"]),reduc(l){l.value>1&&(console.log(l.value),l.value-=1)},add(l){l.value<6&&(l.value+=1)},total(l){l.bool=!l.bool,console.log(l.bool),this.bags=[...this.bags]},quanxuan(l){this.bool=!this.bool,this.bags.map((l=>l.bool=this.bool)),console.log(l)},del(){this.bags=this.bags.filter((l=>0==l.bool)),console.log(this.bags),this.Xbags(this.bags)},order(){if(this.bags.filter((l=>1==l.bool)).length>0){let l=this.bags.filter((l=>1==l.bool));this.Xorder(l),a({url:"../order/order"})}else e({title:"请勾选商品",duration:2e3})}},computed:{totals(){return this.bags.filter((l=>l.bool)).length>0?this.bags.filter((l=>l.bool)).map((l=>Number(l.price*l.value))).reduce(((l,a)=>l+a)):0}},watch:{bags(l){console.log(l),l.length>0&&(this.bool=l.every((l=>l.bool)))}}},[["render",function(l,a,e,y,x,w){const N=g,X=n,q=f,$=h,z=_,I=m,A=C(p("uni-icons"),v),B=j;return s(),o(X,{class:"bag"},{default:t((()=>[i(X,{class:"header"},{default:t((()=>[i(N),i(N,null,{default:t((()=>[u("购物袋")])),_:1}),x.pianji||0==x.bags.length?(s(),o(N,{key:0,onClick:a[0]||(a[0]=l=>x.pianji=!x.pianji)},{default:t((()=>[u("编辑")])),_:1})):(s(),o(N,{key:1,onClick:a[1]||(a[1]=l=>x.pianji=!x.pianji),style:{color:"red"}},{default:t((()=>[u("取消")])),_:1}))])),_:1}),i(X,{class:"bg"}),i(X,{class:"xuanzhe"},{default:t((()=>[(s(!0),c(d,null,r(x.bags,(l=>(s(),o(X,{class:""},{default:t((()=>[i(z,null,{default:t((()=>[i($,null,{default:t((()=>[i(q,{value:"cb",checked:l.bool,onClick:a=>w.total(l)},null,8,["checked","onClick"])])),_:2},1024)])),_:2},1024),i(I,{src:l.small_img,alt:""},null,8,["src"]),i(X,{class:""},{default:t((()=>[k("p",null,[u(b(l.name),1),i(N,null,{default:t((()=>[u(b(l.temName)+b(l.sugarName?"/"+l.sugarName:""),1)])),_:2},1024)]),i(N,null,{default:t((()=>[u(b(l.enname),1)])),_:2},1024),i(X,{class:"icon"},{default:t((()=>[i(N,{style:{color:"#0C34BA","font-weight":"bold"}},{default:t((()=>[u("￥"+b(l.price),1)])),_:2},1024),i(X,null,{default:t((()=>[i(A,{"custom-prefix":"iconfont",type:"icon-jianshao",size:"25",color:"gray",onClick:a=>w.reduc(l)},null,8,["onClick"]),i(B,{type:"text",value:l.value,disabled:"true"},null,8,["value"]),k("span",{onClick:a=>w.add(l)},"+",8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),256))])),_:1}),x.bags.length?(s(),o(X,{key:0,class:"foot"},{default:t((()=>[i(X,null,{default:t((()=>[i(z,null,{default:t((()=>[i($,null,{default:t((()=>[i(q,{value:"cb",checked:x.bool,onClick:w.quanxuan},null,8,["checked","onClick"]),u(" 全选 ")])),_:1})])),_:1})])),_:1}),x.pianji?(s(),o(X,{key:0},{default:t((()=>[i(N,null,{default:t((()=>[u("合计:")])),_:1}),i(X,null,{default:t((()=>[u(" ￥"),i(N,null,{default:t((()=>[u(b(w.totals),1)])),_:1}),u(".00 ")])),_:1}),i(X,{class:"tijiao",onClick:w.order},{default:t((()=>[u(" 提交订单 ")])),_:1},8,["onClick"])])),_:1})):(s(),o(X,{key:1,class:"tijiao",style:{"background-color":"red"},onClick:w.del},{default:t((()=>[u(" 删除选择 ")])),_:1},8,["onClick"]))])),_:1})):(s(),o(X,{key:1,class:"none"},{default:t((()=>[u(" 当前购物车啥也没有哦！ ")])),_:1}))])),_:1})}],["__scopeId","data-v-7098225f"]]);export{x as default};
